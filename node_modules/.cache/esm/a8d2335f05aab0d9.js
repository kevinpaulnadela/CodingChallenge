let writeCsv;_05a‍.w("./writecsv",[["writeCsv",["writeCsv"],function(v){writeCsv=v}]]);const fetch = require("node-fetch");
const objectToCsv = require('./objtocsv');

// import {totalOrderVal} from './ordervalfc';
// import {avgUnitPrice} from './avgunitfc';
// import {distUnitCount} from './distunitcountfc';
// import {totalUnitsCount} from './totalunitcount';

 const getReport = async function() {
  const jsonlUrl = 'https://next.json-generator.com/api/json/get/EJROS4MLu'
  const res = await fetch(jsonlUrl);
  const orders = await res.json();

  // Implicit return on objects for mapped columns
  const orderlines = orders.map((order) => ({

  //  // Get Order ID Column
   order_id: order.order_id

  //  // Get Datetime Column
  //  order_datetime: order.order_date,

  // //  // Get Total Order Value Column
  // //  total_order_value: totalOrderVal(),

  // //  // Get Average Unit Price Column
  // //  average_unit_price: avgUnitPrice(),

  // //  // Get Distinct Unit Count Column
  // //  distinct_unit_count: distUnitCount(),

  // //  // Get Total Units Count Column
  // //  total_units_count: totalUnitsCount(),

   // Get Customer State Column
  //  customer_state: announcements

  }));

 const csvData = objectToCsv(orderlines);
 module.exports = csvData;
 writeCsv()
}
getReport()